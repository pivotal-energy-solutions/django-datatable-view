{% extends "example_base.html" %}

{% block static %}
    {{ block.super }}
    <script src="{{ STATIC_URL }}syntaxhighlighter/shBrushJScript.js" type="text/javascript"></script>

    <!-- Resources for "selectize columns" demo -->
	{{ form.media }}
    <!-- Initialization for selectize tables -->
    <script type="text/javascript">
        datatableview.auto_initialize = false;
        <!-- Extra functions for selectize -->
        datatableview.onLoadSelectize = function(query, callback) {
        	if (!query.length) return callback();
            $.ajax({
                url: 'https://api.github.com/legacy/repos/search/' + encodeURIComponent(query),
                type: 'GET',
                error: function() {
                    callback();
                },
                success: function(res) {
                    callback(res.repositories.slice(0, 10));
                }
            });
        };
        datatableview.renderSelectize = {
            option: function(item, escape) {
                return '<div><span class="title"><span class="name">' + escape(item.name) + '</span></span> ' +
                    '<b class="description">' + escape(item.description) + '</b></div>';
            }
        };
        $(function() {
            var selectize_options = {};
            datatableview.initialize($('.datatable'), {
                fnRowCallback : datatableview.make_selectize(selectize_options),
            });
        });
    </script>
{% endblock static %}
